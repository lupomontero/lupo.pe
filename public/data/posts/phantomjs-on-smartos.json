{
  "id": "phantomjs-on-smartos",
  "title": "PhantomJS on SmartOS",
  "url": "https://lupomontero.com/phantomjs-on-smartos/",
  "tags": [
    "phantomjs",
    "javascript",
    "smartos"
  ],
  "author": "lupo",
  "publishedAt": "2015-06-01T00:00:00.000Z",
  "body": "<p>So I‚Äôve been playing around with <a href=\"https://www.joyent.com/\">Joyent‚Äôs Smart Data Center</a>\nfor a few days and so far it‚Äôs been a very positive experience. Today I was\ndeploying a test app when bang!</p>\n<pre><code class=\"language-sh\">$ phantomjs@1.9.17 install /root/releases/web/node_modules/haribo/node_modules/phantomjs\n$ node install.js\n\nUnexpected platform or architecture: sunos x64\n</code></pre>\n<p>Silly me I didn‚Äôt remember I was depending on <a href=\"http://phantomjs.org/\"><code>phantomjs</code></a>,\nand it turns out there is no ‚Äúofficial‚Äù binary for <a href=\"https://smartos.org/\">SmartOS</a>.\nThis seems to have been an issue for a while.</p>\n<p>https://twitter.com/AriyaHidayat/status/324035301750226944</p>\n<p>The GitHub issue is a long one... but luckily I spotted <a href=\"https://twitter.com/mamash\">@mamash</a>‚Äòs comments (and\ncontributions), where he <a href=\"https://github.com/ariya/phantomjs/issues/10521#issuecomment-70156661\">shared a link</a>\nto a <a href=\"https://us-east.manta.joyent.com/pkgsrc/public/packages/SmartOS/phantomjs/phantomjs-1.9.8-smartos-i386.tgz\">pre-built binary for SmartOS</a>, oh\nyeah! This binary is for <code>phantomjs</code> 1.9.8, which is not exactly the latest, but\nwill suffice for my experiment.</p>\n<p>So I went ahead, dowloaded, linked the binary and voil?!</p>\n<pre><code class=\"language-sh\">PREFIX=/opt/local\nSRC=$PREFIX/src/phantomjs\nDOWNLOAD_FILE=phantomjs-1.9.8-smartos-i386.tgz\nDOWNLOAD_URL=https://us-east.manta.joyent.com/pkgsrc/public/packages/SmartOS/phantomjs/$DOWNLOAD_FILE\n\n# Create directory where we are going to put phantomjs' source files\nmkdir -p $SRC\n# Go into dir, download and extract archive\ncd $SRC\nwget $DOWNLOAD_URL\ntar -xzvf $DOWNLOAD_FILE\n# Link binary\nln -s $SRC/bin/phantomjs $PREFIX/bin/\n</code></pre>\n<p>After following these steps, <code>phantomjs</code> is now on my <code>PATH</code> and seems to work\nas expected. So far, I have been able to run all of my <code>phantomjs</code> scripts.</p>\n<p>Now the question becomes: What needs to be resolved in order to build/compile\nPhantomJS 2.0 on SmartOS/Solaris? Any ideas? I will likely be exploring this in\nthe near future, but I‚Äôm no C++ expert, so pointers would be appreciated üòâ</p>"
}