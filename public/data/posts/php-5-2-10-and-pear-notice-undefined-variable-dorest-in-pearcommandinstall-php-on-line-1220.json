{
  "id": "php-5-2-10-and-pear-notice-undefined-variable-dorest-in-pearcommandinstall-php-on-line-1220",
  "title": "PHP 5.2.10 and PEAR – Notice: Undefined variable: dorest in PEAR/Command/Install.php on line 1220",
  "tags": [
    "pear",
    "php"
  ],
  "author": "lupo",
  "publishedAt": "2009-12-08T00:00:00.000Z",
  "body": "<p>Today, after upgrading packages with apt-get on a server running Debian Lenny my\nPEAR installation seemed to be broken. PHP had been updated to 5.2.10 and PEAR\nversion was now 1.8.0. So when I realised that PEAR wasn’t the latest stable I\ntried upgrading PEAR using the command I’ve always used: pear upgrade pear,\nwhere the first “pear” is the command we run, then the “upgrade” sub-command and\nfinally the name of the package we want to work with, unsurprisingly “pear”.</p>\n<p>So I type the following expecting a happy success message and get this instead:</p>\n<pre><code class=\"language-sh\">$ pear upgrade pear\nNotice: Undefined variable: dorest in PEAR/Command/Install.php on line 1220\nNotice: Undefined variable: latest in PEAR/Command/Install.php on line 1228\nNotice: Undefined variable: latest in PEAR/Command/Install.php on line 1234\nWarning: array_change_key_case(): The argument should be an array in PEAR/Command/Install.php on line 1234\nNothing to upgrade\n</code></pre>\n<p>After a quick look at the problem I figured out that it was a problem with the\ncached channel data that PEAR stores under a directory called ./channels in the\nPEAR installation directory. The problem is quickly solved by deleting the files\nin that directory. To find out where PEAR is installed you can use the\n<code>pear list-files</code> command as follows:</p>\n<pre><code class=\"language-sh\">$ pear list-files pear\nInstalled Files For pear\n========================\nType   Install Path\nphp    /usr/local/zend/share/pear/OS/Guess.php\nphp    /usr/local/zend/share/pear/PEAR/ChannelFile/Parser.php\n...\n</code></pre>\n<p>In this case my installation directory is /usr/local/zend/share/pear. So now\nthat we know were the directory is we change directory and delete all files in\nit.</p>\n<pre><code class=\"language-sh\">$ cd /usr/local/zend/share/pear/.channels/\n$ rm -rf *\n</code></pre>\n<p>After deleting the channels cache you will need to update it by issuing the\nfollowing command:</p>\n<pre><code class=\"language-sh\">$ pear channel-update pear.php.net\nUpdating channel \"pear.php.net\"\nUpdate of Channel \"pear.php.net\" succeeded\n</code></pre>\n<p>And finally we run the upgrade as originally expected.</p>\n<pre><code class=\"language-sh\">$ pear upgrade pear\ndownloading PEAR-1.9.0.tgz ...\nStarting to download PEAR-1.9.0.tgz (291,634 bytes)\n.................................done: 291,634 bytes\ndownloading Structures_Graph-1.0.3.tgz ...\nStarting to download Structures_Graph-1.0.3.tgz (30,191 bytes)\n...done: 30,191 bytes\nupgrade ok: channel://pear.php.net/Structures_Graph-1.0.3\nupgrade ok: channel://pear.php.net/PEAR-1.9.0\nPEAR: Optional feature webinstaller available (PEAR's web-based installer)\nPEAR: Optional feature gtkinstaller available (PEAR's PHP-GTK-based installer)\nPEAR: Optional feature gtk2installer available (PEAR's PHP-GTK2-based installer)\nPEAR: To install optional features use \"pear install pear/PEAR#featurename\"\n</code></pre>\n<p>To wrap it up lets use the “pear info” command to check that we are now running\nthe latest version (1.9.0 in this case).</p>\n<pre><code class=\"language-sh\">$ pear info pear\nAbout pear.php.net/PEAR-1.9.0\n=============================\nRelease Type           PEAR-style PHP-based Package\nName                   PEAR\nChannel                pear.php.net\nSummary                PEAR Base System\nDescription            The PEAR package contains:\n...\n</code></pre>"
}