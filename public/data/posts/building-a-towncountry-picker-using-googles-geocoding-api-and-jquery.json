{
  "id": "building-a-towncountry-picker-using-googles-geocoding-api-and-jquery",
  "title": "Building a town/country picker using Google’s Geocoding API and jQuery",
  "tags": [
    "geocoding",
    "javascript",
    "jquery"
  ],
  "author": "lupo",
  "publishedAt": "2011-08-03T00:00:00.000Z",
  "body": "<p>I’m currently working on a new “social” site for a startup and when building\nsome of the forms, one of the bits of information we need to collect from users\nis their country and town or city. Nothing really new, but I didn’t want to\nbuild an enormous dropdown with every country in the world and then leave the\ncity/town bit as a simple text input. In this case the possibility of building a\ncity/town dropdown based on the choice of country just seems nonsense.</p>\n<p>So I then remembered how Facebook does it. They give you a simple input field\nand as you start typing it will show a list with options of places matching the\nstring you’ve typed so far. You then select the desired location from the list\nand voila. Neat.</p>\n<p>So now I wanted to implement something like this as a <a href=\"http://jquery.com/\">jQuery</a>\nplugin. The first question I needed to ask myself is “were do I get the data\nfrom?”. I needed to be able to send off AJAX requests to some resource that\nsearches for a given term and returns possible “places”. This is where\n<a href=\"http://code.google.com/apis/maps/documentation/geocoding/\">Google’s Geocoding API</a>\ncomes in. The geocoding API supports JSON output, which is very handy, but we\nstill have the problem of “same domain policy” for XHR requests. To work around\nthis I suggest using a simple “proxy” type script on the server side to issue\nthe requests to Google on behalf of the browser. Doing this we query our own\ndomain for the searches and avoid cross-domain issues. Checkout the\n<a href=\"http://demos.e-noise.com/jQuery.locationPicker/\">demo</a> for a working example\nand the <a href=\"https://github.com/lupomontero/jQuery.locationPicker/blob/master/demo/proxy.php\">“proxy” script used by the demo on GitHub</a>.</p>\n<p>The plugin is still work in progress but you can check (and fork) the code on\n<a href=\"https://github.com/lupomontero/jQuery.locationPicker\">GitHub</a>. I hope someone\nwill find it useful when trying to build the same kind of\nuser experience.</p>\n<p>Feedback, bug fixes and new features welcome.</p>\n<ul>\n<li><a href=\"https://github.com/lupomontero/jQuery.locationPicker\">Source</a></li>\n<li><a href=\"http://demos.e-noise.com/jQuery.locationPicker/\">Demo</a></li>\n</ul>"
}